<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat Tabs Manager - Preview</title>
  <link rel="stylesheet" href="src/page/chatTabs/index.css">
  <style>
    /* Preview-specific styles */
    body {
      margin: 0;
      padding: 0;
    }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- Left Sidebar Navigation -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect x="4" y="4" width="24" height="24" rx="6" stroke="currentColor" stroke-width="1.5"/>
          <path d="M11 16h10M11 12h6M11 20h8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        <h1 class="app-title">All-in-One Chat</h1>
      </div>
      
      <nav class="sidebar-nav">
        <a href="#" class="nav-item active">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="3" y="3" width="14" height="14" rx="3" stroke="currentColor" stroke-width="1.5"/>
            <path d="M7 10h6M7 7h4M7 13h5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
          <span>Chat Tabs</span>
        </a>
        <a href="#" class="nav-item">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="10" cy="10" r="7" stroke="currentColor" stroke-width="1.5"/>
            <path d="M10 7v3l2 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
          <span>Settings</span>
        </a>
        <a href="#" class="nav-item">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10 3v14M3 10h14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
          <span>About</span>
        </a>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <div class="content-header">
        <div>
          <h2 class="page-title">Chat Tabs</h2>
          <p class="page-subtitle">Manage your chat application tabs and sessions</p>
        </div>
        <button class="btn btn-primary" id="addTabBtn">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8 3v10M3 8h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
          Add Tab
        </button>
      </div>

      <div class="card">
        <div class="card-body">
          <div class="table-container">
            <table class="table" id="tabsTable">
              <thead>
                <tr>
                  <th>Title</th>
                  <th>URL</th>
                  <th>Partition</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="tabsTableBody">
                <!-- Sample data for preview -->
                <tr data-id="1">
                  <td>
                    <div class="tab-title">WhatsApp Web</div>
                  </td>
                  <td>
                    <div class="tab-url" title="https://web.whatsapp.com">https://web.whatsapp.com</div>
                  </td>
                  <td>
                    <div class="tab-partition">
                      <span>persist:whatsapp-k8x2p</span>
                      <button class="btn-copy" onclick="copyToClipboard('persist:whatsapp-k8x2p', this)" title="Copy">
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <rect x="4" y="4" width="7" height="7" rx="1.5" stroke="currentColor" stroke-width="1.2"/>
                          <path d="M3 10V3.5a1 1 0 011-1h6" stroke="currentColor" stroke-width="1.2"/>
                        </svg>
                      </button>
                    </div>
                  </td>
                  <td>
                    <span class="status-badge active">
                      <span class="status-dot"></span>
                      Active
                    </span>
                  </td>
                  <td>
                    <button class="btn-actions" data-id="1" onclick="showContextMenu(event, '1')">
                      <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="10" cy="5" r="1.5" fill="currentColor"/>
                        <circle cx="10" cy="10" r="1.5" fill="currentColor"/>
                        <circle cx="10" cy="15" r="1.5" fill="currentColor"/>
                      </svg>
                    </button>
                  </td>
                </tr>
                <tr data-id="2">
                  <td>
                    <div class="tab-title">Telegram Web</div>
                  </td>
                  <td>
                    <div class="tab-url" title="https://web.telegram.org">https://web.telegram.org</div>
                  </td>
                  <td>
                    <div class="tab-partition">
                      <span>persist:telegram-m9y3q</span>
                      <button class="btn-copy" onclick="copyToClipboard('persist:telegram-m9y3q', this)" title="Copy">
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <rect x="4" y="4" width="7" height="7" rx="1.5" stroke="currentColor" stroke-width="1.2"/>
                          <path d="M3 10V3.5a1 1 0 011-1h6" stroke="currentColor" stroke-width="1.2"/>
                        </svg>
                      </button>
                    </div>
                  </td>
                  <td>
                    <span class="status-badge active">
                      <span class="status-dot"></span>
                      Active
                    </span>
                  </td>
                  <td>
                    <button class="btn-actions" data-id="2" onclick="showContextMenu(event, '2')">
                      <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="10" cy="5" r="1.5" fill="currentColor"/>
                        <circle cx="10" cy="10" r="1.5" fill="currentColor"/>
                        <circle cx="10" cy="15" r="1.5" fill="currentColor"/>
                      </svg>
                    </button>
                  </td>
                </tr>
                <tr data-id="3">
                  <td>
                    <div class="tab-title">Slack</div>
                  </td>
                  <td>
                    <div class="tab-url" title="https://app.slack.com">https://app.slack.com</div>
                  </td>
                  <td>
                    <div class="tab-partition">
                      <span>persist:slack-p4w7r</span>
                      <button class="btn-copy" onclick="copyToClipboard('persist:slack-p4w7r', this)" title="Copy">
                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                          <rect x="4" y="4" width="7" height="7" rx="1.5" stroke="currentColor" stroke-width="1.2"/>
                          <path d="M3 10V3.5a1 1 0 011-1h6" stroke="currentColor" stroke-width="1.2"/>
                        </svg>
                      </button>
                    </div>
                  </td>
                  <td>
                    <span class="status-badge inactive">
                      <span class="status-dot"></span>
                      Inactive
                    </span>
                  </td>
                  <td>
                    <button class="btn-actions" data-id="3" onclick="showContextMenu(event, '3')">
                      <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="10" cy="5" r="1.5" fill="currentColor"/>
                        <circle cx="10" cy="10" r="1.5" fill="currentColor"/>
                        <circle cx="10" cy="15" r="1.5" fill="currentColor"/>
                      </svg>
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Side Panel for Add/Edit Tab -->
  <div class="side-panel" id="sidePanel">
    <div class="side-panel-overlay" id="sidePanelOverlay"></div>
    <div class="side-panel-content">
      <div class="side-panel-header">
        <h3 id="panelTitle">Add Chat Tab</h3>
        <button class="btn-close" id="closePanelBtn">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M5 5l10 10M15 5l-10 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
        </button>
      </div>

      <div class="side-panel-body">
        <form id="tabForm">
          <div class="form-group">
            <label for="tabTitle" class="form-label">
              Title
              <span class="required">*</span>
            </label>
            <input 
              type="text" 
              id="tabTitle" 
              class="form-input" 
              placeholder="e.g., WhatsApp, Telegram, Slack"
              required
            />
            <span class="form-error" id="titleError">Title is required</span>
          </div>

          <div class="form-group">
            <label for="tabUrl" class="form-label">
              URL
              <span class="required">*</span>
            </label>
            <input 
              type="url" 
              id="tabUrl" 
              class="form-input" 
              placeholder="https://web.whatsapp.com"
              required
            />
            <span class="form-error" id="urlError">Please enter a valid HTTPS URL</span>
          </div>

          <div class="form-group">
            <label for="tabPartition" class="form-label">
              Partition
              <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-lock">
                <rect x="3" y="6" width="8" height="6" rx="1" stroke="currentColor" stroke-width="1.2"/>
                <path d="M5 6V4a2 2 0 114 0v2" stroke="currentColor" stroke-width="1.2"/>
              </svg>
            </label>
            <div class="input-group">
              <input 
                type="text" 
                id="tabPartition" 
                class="form-input input-mono" 
                readonly
                value="persist:..."
              />
              <button type="button" class="btn-icon" id="copyPartitionBtn" title="Copy to clipboard">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <rect x="5" y="5" width="8" height="8" rx="1.5" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M3 11V4a1 1 0 011-1h7" stroke="currentColor" stroke-width="1.5"/>
                </svg>
              </button>
            </div>
            <span class="form-helper" id="partitionHelper">Auto-generated to isolate session. Cannot be edited.</span>
            <div class="info-note" id="editNote" style="display: none;">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="8" cy="8" r="6" stroke="currentColor" stroke-width="1.5"/>
                <path d="M8 11V8M8 5h.01" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
              <span>Partition is fixed to preserve existing login/session.</span>
            </div>
          </div>

          <input type="hidden" id="tabId" value="">
        </form>
      </div>

      <div class="side-panel-footer">
        <button type="button" class="btn btn-secondary" id="cancelBtn">Cancel</button>
        <button type="submit" class="btn btn-primary" id="saveBtn" form="tabForm">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 8l3 3 7-7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Save Tab
        </button>
      </div>
    </div>
  </div>

  <!-- Context Menu -->
  <div class="context-menu" id="contextMenu">
    <button class="context-menu-item" data-action="edit">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M11 2l3 3-8 8H3v-3l8-8z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/>
      </svg>
      Edit
    </button>
    <button class="context-menu-item context-menu-danger" data-action="delete">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M3 4h10M5 4V3a1 1 0 011-1h4a1 1 0 011 1v1M13 4v9a1 1 0 01-1 1H4a1 1 0 01-1-1V4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
      Delete
    </button>
  </div>

  <script src="src/page/chatTabs/index.js"></script>
</body>
</html>
